var consentVersion="1.23.3";function addElement(){var otBtn=document.createElement("div");otBtn.setAttribute("id","ot-sdk-btn");otBtn.setAttribute("class","ot-sdk-show-settings");otBtn.style.cssText="display: none;";document.body.appendChild(otBtn)}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",addElement)}else{addElement()}(function(){"use strict";function getCookie(cname){var name=cname+"=";var cookie=document.cookie;var ca=cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return null}function setCookie(name,value,expTimestamp){var expires="";var domain="";if(expTimestamp){var date=new Date(Number(expTimestamp)*1e3);expires="; expires="+date.toUTCString()}else{var date=new Date;date.setTime(date.getTime()+365*24*60*60*1e3);expires="; expires="+date.toUTCString()}domain=isStagingScript?"":"; domain="+window.location.host.split(".").slice(-2).join(".");if(window.location.href.indexOf("startpagina.nl/v/")>-1){document.cookie=name+"="+(value||"")+expires+domain+"; path=/v; SameSite=Lax"}else{document.cookie=name+"="+(value||"")+expires+domain+"; path=/; SameSite=Lax"}}var isSafari=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);var isOtConsentString=window.location.href.indexOf("otConsentString")>-1;var isStagingScript=!!document.querySelector('script[src*="consent-staging.313.nl"]');function setThirdPartyCookie(cookieDataObject){var xhr=new XMLHttpRequest;xhr.open("POST",THIRD_PARTY_SET_CONSENT_URL,true);xhr.setRequestHeader("Content-Type","application/json");xhr.withCredentials=true;xhr.send(cookieDataObject)}function deleteThirdPartyCookie(){var xhr=new XMLHttpRequest;xhr.open("DELETE",THIRD_PARTY_SET_CONSENT_URL,true);xhr.withCredentials=true;xhr.send(null)}function getThirdPartyCookie(callback){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200)callback(xhr.responseText)};xhr.open("GET",THIRD_PARTY_GET_CONSENT_URL,true);xhr.withCredentials=true;xhr.send(null)}function getLastReconsentDate(){var otDomainDataObj=window.Optanon.GetDomainData();return otDomainDataObj.LastReconsentDate}function isReconsent(otReconsentDate,thirdPartyReconsentDate,firstPartyReconsentDate){firstPartyReconsentDate=firstPartyReconsentDate===null?0:Number(firstPartyReconsentDate);thirdPartyReconsentDate=thirdPartyReconsentDate===null?0:Number(thirdPartyReconsentDate);thirdPartyReconsentDate=firstPartyReconsentDate>thirdPartyReconsentDate?firstPartyReconsentDate:thirdPartyReconsentDate;if(otReconsentDate!==null&&otReconsentDate!==thirdPartyReconsentDate&&otReconsentDate-1e3*60*60*24>=thirdPartyReconsentDate){return true}return false}function getThirdPartyCookieHandler(response){var responseObj=JSON.parse(response);var optanonConsentCookie=getCookie("OptanonConsent");var eupubconsentCookie=getCookie("eupubconsent-v2");var otAdditionalConsentStringCookie=getCookie("OTAdditionalConsentString");var optAlertBoxClosedCookie=getCookie("OptanonAlertBoxClosed");if(responseObj.dpgconsent_data!==null){if(optanonConsentCookie===null||optanonConsentCookie.indexOf("groups=")===-1){setCookie("OptanonConsent",responseObj.dpgconsent_data,responseObj.dpgconsent_expiration_date);if(responseObj.dpgconsent_data_v2!==null)setCookie("eupubconsent-v2",responseObj.dpgconsent_data_v2,responseObj.dpgconsent_expiration_date);if(responseObj.dpgconsent_data_v3!==null)setCookie("OTAdditionalConsentString",responseObj.dpgconsent_data_v3,responseObj.dpgconsent_expiration_date);setCookie("OptanonAlertBoxClosed",(new Date).toISOString(),responseObj.dpgconsent_expiration_date)}else{var thirdPartyData={consentId:responseObj.dpgconsent_data.match(/consentId=[^&]*/g),groups:responseObj.dpgconsent_data.match(/groups=[^&]*/g),version:responseObj.dpgconsent_data.match(/version=[^&]*/g)};if(thirdPartyData.consentId!==null)thirdPartyData.consentId=thirdPartyData.consentId[0];if(thirdPartyData.groups!==null)thirdPartyData.groups=thirdPartyData.groups[0];if(thirdPartyData.version!==null)thirdPartyData.version=thirdPartyData.version[0];var firstPartyData={consentId:optanonConsentCookie.match(/consentId=[^&]*/g),groups:optanonConsentCookie.match(/groups=[^&]*/g),version:optanonConsentCookie.match(/version=[^&]*/g)};if(firstPartyData.consentId!==null)firstPartyData.consentId=firstPartyData.consentId[0];if(firstPartyData.groups!==null)firstPartyData.groups=firstPartyData.groups[0];if(firstPartyData.version!==null)firstPartyData.version=firstPartyData.version[0];if(thirdPartyData.consentId!==firstPartyData.consentId||thirdPartyData.groups!==firstPartyData.groups||thirdPartyData.version!==firstPartyData.version){optanonConsentCookie=optanonConsentCookie.replace(firstPartyData.consentId,thirdPartyData.consentId).replace(firstPartyData.groups,thirdPartyData.groups).replace(firstPartyData.version,thirdPartyData.version);setCookie("OptanonConsent",optanonConsentCookie,responseObj.dpgconsent_expiration_date);if(responseObj.dpgconsent_data_v2===eupubconsentCookie||responseObj.dpgconsent_data_v3===otAdditionalConsentStringCookie){if(responseObj.dpgconsent_data_v2!==null&&responseObj.dpgconsent_data_v2===eupubconsentCookie){setCookie("eupubconsent-v2",responseObj.dpgconsent_data_v2,responseObj.dpgconsent_expiration_date)}if(responseObj.dpgconsent_data_v3!==null&&responseObj.dpgconsent_data_v3===otAdditionalConsentStringCookie){setCookie("OTAdditionalConsentString",responseObj.dpgconsent_data_v3,responseObj.dpgconsent_expiration_date)}setCookie("OptanonAlertBoxClosed",(new Date).toISOString(),responseObj.dpgconsent_expiration_date)}}}if(responseObj.dpgconsent_data_v2!==eupubconsentCookie||responseObj.dpgconsent_data_v3!==otAdditionalConsentStringCookie){if(responseObj.dpgconsent_data_v2!==null&&responseObj.dpgconsent_data_v2!==eupubconsentCookie){setCookie("eupubconsent-v2",responseObj.dpgconsent_data_v2,responseObj.dpgconsent_expiration_date)}if(responseObj.dpgconsent_data_v3!==null&&responseObj.dpgconsent_data_v3!==otAdditionalConsentStringCookie){setCookie("OTAdditionalConsentString",responseObj.dpgconsent_data_v3,responseObj.dpgconsent_expiration_date)}setCookie("OptanonAlertBoxClosed",(new Date).toISOString(),responseObj.dpgconsent_expiration_date)}}else{if(optAlertBoxClosedCookie===null&&optanonConsentCookie!==null&&optanonConsentCookie.indexOf("groups=")>-1){setCookie("OptanonConsent","","1");if(eupubconsentCookie!==null){setCookie("eupubconsent-v2","","1")}if(otAdditionalConsentStringCookie!==null){setCookie("OTAdditionalConsentString","","1")}}}var callOnlyOnce=0;window.OptanonWrapper=function(){if(callOnlyOnce===0){callOnlyOnce++;fixAddtlConsentBug();replaceSiteName();var otReconsentDate=getLastReconsentDate();var firstPartyReconsentDate=getCookie("dpgconsentReconsentDate");if(isReconsent(otReconsentDate,responseObj.dpgconsent_reconsent_date,firstPartyReconsentDate)){console.log("isRec");if(responseObj.dpgconsent_data!==null){deleteThirdPartyCookie()}if(getCookie("OptanonAlertBoxClosed")!==null){setCookie("dpgconsentReconsentDate","","1");setCookie("OptanonConsent","","1");setCookie("eupubconsent-v2","","1");setCookie("OTAdditionalConsentString","","1");setCookie("OptanonAlertBoxClosed","","1")}}window.Optanon.OnConsentChanged(function(){if(window.utag&&window.utag.ut){var obj={consentUpdate:"true"};window.utag.ut.merge(obj,window.utag.data,0);window.utag.view(obj)}var optanonConsentCookieData={dpgconsent_data:getCookie("OptanonConsent"),dpgconsent_data_v2:getCookie("eupubconsent-v2"),dpgconsent_data_v3:getCookie("OTAdditionalConsentString"),dpgconsent_reconsent_date:responseObj.dpgconsent_reconsent_date!==null&&otReconsentDate!==null&&otReconsentDate<Number(responseObj.dpgconsent_reconsent_date)?responseObj.dpgconsent_reconsent_date:otReconsentDate};setThirdPartyCookie(JSON.stringify(optanonConsentCookieData));if(optanonConsentCookieData.dpgconsent_reconsent_date!==null)setCookie("dpgconsentReconsentDate",optanonConsentCookieData.dpgconsent_reconsent_date,responseObj.dpgconsent_expiration_date)})}}}function duplicatedCookieHandle(){var cookiesPartsLength=document.cookie.split("OptanonConsent=").length;var domain="";function deleteWrongDomainCookie(name){if(window.location.host.indexOf("www")>-1){domain="; domain="+window.location.host.replace("www","")}if(window.location.href.indexOf("startpagina.nl/v/")>-1){document.cookie=name+"=;"+" expires=Thu, 01 Jan 1970 00:00:00 UTC;"+domain+"; path=/v;"}else{document.cookie=name+"=;"+" expires=Thu, 01 Jan 1970 00:00:00 UTC;"+domain+"; path=/;"}}if(cookiesPartsLength>=3){deleteWrongDomainCookie("OptanonConsent");deleteWrongDomainCookie("eupubconsent-v2");deleteWrongDomainCookie("OTAdditionalConsentString");deleteWrongDomainCookie("OptanonAlertBoxClosed")}}function processConsentIfString(){var consentString=new URLSearchParams(window.location.search).get("otConsentString");if(consentString){consentString=consentString.split(",tcstring:").join(";").split(",addtlconsent:").join(";").split(";");var datestamp=(new Date).toString().replace(/\ /g,"+").replace(/:/g,"%3A");setCookie("OptanonConsent","datestamp="+datestamp+"&interactionCount=0&isIABGlobal=false&landingPath=NotLandingPage&groups="+encodeURIComponent(consentString[0])+"&hosts=&legInt=;");setCookie("eupubconsent-v2",encodeURIComponent(consentString[1]));setCookie("OptanonAlertBoxClosed",(new Date).toISOString());if(consentString[2]){setCookie("OTAdditionalConsentString",consentString[2])}else{setCookie("OTAdditionalConsentString","1~66.70.89.93.108.122.149.162.167.184.196.241.253.311.317.323.338.415.440.448.482.486.494.495.540.571.574.588.817.864.981.1051.1095.1097.1126.1127.1201.1205.1211.1276.1301.1365.1415.1449.1570.1753.1765.1870.1878.1889.2072.2253.2357.2526.2568.2575.2677.2923")}}}function noCrossDomainFlow(){processConsentIfString();window.OptanonWrapper=function(){fixAddtlConsentBug();replaceSiteName();window.Optanon.OnConsentChanged(function(){if(window.utag&&window.utag.ut){var obj={consentUpdate:"true"};window.utag.ut.merge(obj,window.utag.data,0);window.utag.view(obj)}})}}if(!isOtConsentString){if(!isSafari){var THIRD_PARTY_SET_CONSENT_URL="https://consent.313.nl/";var THIRD_PARTY_GET_CONSENT_URL="https://consent.313.nl/";duplicatedCookieHandle();getThirdPartyCookie(getThirdPartyCookieHandler)}else{noCrossDomainFlow()}}else{noCrossDomainFlow()}var Groups={functional:"C0003",stats:"C0002",social:"C0005",interests:"C0004",ads:["iab01","STACK42"]};window.Consent={has_optin:function(group){var groupID=Groups[group];var isActive=false;var optanonConsentGroups=getOptanonConsentGroups();if(optanonConsentGroups){optanonConsentGroups_loop:for(var i=0;i<optanonConsentGroups.length;i++){if(Array.isArray(groupID)){for(var j=0;j<groupID.length;j++){if(optanonConsentGroups[i][0]===groupID[j]&&optanonConsentGroups[i][1]==="1"){isActive=true;break optanonConsentGroups_loop}}}else{if(optanonConsentGroups[i][0]===groupID&&optanonConsentGroups[i][1]==="1"){isActive=true;break}}}}return isActive},show_settings:function(){if(window.Optanon){var infoDisplay=document.querySelector("#optanon-popup-wrapper");if(!infoDisplay||!infoDisplay.style.display||infoDisplay.style.display==="none"){window.Optanon.ToggleInfoDisplay()}}return false}};function getOptanonConsentGroups(){if(getCookie("OptanonConsent")!==null&&getCookie("OptanonConsent").indexOf("groups=")!==-1){var optanonConsentCookie;var optanonConsentGroups=[];optanonConsentCookie=getCookie("OptanonConsent").split("&");for(var i=0;i<optanonConsentCookie.length;i++){if(optanonConsentCookie[i].indexOf("groups=")!==-1){optanonConsentGroups=optanonConsentCookie[i].replace("groups=","").split("%2C");break}}for(var i=0;i<optanonConsentGroups.length;i++){optanonConsentGroups[i]=optanonConsentGroups[i].split("%3A")}return optanonConsentGroups}else{return false}}function replaceSiteName(){if(window.document.getElementById("oneTrustDomain")){if(window.utag&&window.utag.data&&window.utag.data.site_name){if(window.location.href.indexOf("nu.nl")>-1){window.document.getElementById("oneTrustDomain").innerHTML=window.utag.data.site_name}else{window.document.getElementById("oneTrustDomain").innerHTML=window.utag.data.site_name[0].toUpperCase()+window.utag.data.site_name.slice(1).toLowerCase()}}else if(window.location.href.indexOf("startpagina.nl/v/")>-1){window.document.getElementById("oneTrustDomain").innerHTML="Goeievraag.nl"}else if(window.location.href.indexOf("vtwonen.nl")>-1){window.document.getElementById("oneTrustDomain").innerHTML="vtwonen.nl"}else{var sitename=window.location.hostname.split(".").slice(-2).join(".");window.document.getElementById("oneTrustDomain").innerHTML=sitename[0].toUpperCase()+sitename.slice(1).toLowerCase()}}}function fixAddtlConsentBug(){var darkFilter=document.querySelector("#onetrust-consent-sdk .onetrust-pc-dark-filter");var body=document.querySelector("body");if(getCookie("disabledBanner")){var cookieBanner=document.querySelector("#onetrust-banner-sdk");if(cookieBanner){cookieBanner.style.display="none"}if(darkFilter){darkFilter.style.display="none"}body.style.top="0"}var closeBtn=document.querySelector("#close-pc-btn-handler");if(closeBtn){closeBtn.addEventListener("click",function(){if(darkFilter){darkFilter.style.display="none"}})}var acceptButton=document.querySelector("#onetrust-consent-sdk .save-preference-btn-handler");if(acceptButton){acceptButton.addEventListener("click",function(){setCookie("disabledBanner","true")})}}})();