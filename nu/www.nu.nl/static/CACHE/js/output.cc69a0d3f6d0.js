;NU.namespace('NU.Config.RoyalSlider.default');NU.Config.RoyalSlider.nuDefault={fullscreen:{enabled:true,nativeFS:false},controlNavigation:'none',autoScaleSlider:true,autoScaleSliderWidth:640,autoScaleSliderHeight:360,imageScalePadding:0,loop:false,imageScaleMode:'fit',navigateByClick:true,numImagesToPreload:0,arrowsNav:true,arrowsNavAutoHide:true,arrowsNavHideOnTouch:true,keyboardNavEnabled:true,fadeinLoadedSlide:true,globalCaption:true,globalCaptionInside:false,transitionType:'fade',transitionSpeed:200,thumbs:{fitInViewport:false,appendSpan:true,firstMargin:true,paddingBottom:0}};;NU.CoreData={init:function(){this.initBlockRefresher();this.initBlockAjax();},initBlockAjax:function(){var blockSelector='.block';var linkSelector='a.ajax';var contentSelector='.block-content > ul';var timesClicked=0;jQuery('.block').on('click',linkSelector+":not('.js-no-interaction')",function(e){e.preventDefault();var el=jQuery(this);var block=el.parents(blockSelector);var url=el.data('url');timesClicked++;jQuery.getJSON(url,function(response){if(response){var html=response.html;block.find(contentSelector).each(function(i,el){var ajaxContent=$(contentSelector,html),ajaxButton=$(linkSelector,html).eq(i);$(el).append($(ajaxContent[i]).children('li'));block.find(linkSelector).eq(i).replaceWith(ajaxButton);block.trigger('block-ajaxappended');});}});});NU.log('loaded ajax blocks');},initBlockRefresher:function(){jQuery('.block').each(function(i,e){var element=jQuery(e);var url=element.data('url');var refresh=parseInt(element.data('refresh'));if(url&&refresh){refresh=Math.max(5,refresh);refresh=refresh*1000;setInterval(function(){jQuery.getJSON(url,function(response){if(response){var html=response.html;element.html(html);element.trigger('blockRefreshed',response);NU.log(['block refreshed',element]);}})},refresh);}});NU.log('loaded block refresher');}};$(function(){NU.CoreData.init();});;var stage_debug;NU.CoreUi={init:function(){this.initCrossBrowserFixes();this.initLazyUnveil();this.initRoyalslider('.block.slideshow .royalSlider',NU.Config.RoyalSlider.nuDefault);this.initRoyalslider('.block.highlight .royalSlider',NU.Config.RoyalSlider.dagVanNu);this.initRoyalslider('.block.video .royalSlider',NU.Config.RoyalSlider.rsVideo);this.initTabs('body',jQuery);this.initTabsOnRefresh();this.initMixedTabs();this.initCollapsibles();},init_after_consent:function(){this.initSearch();},initResolutionVariables:function(){$(window).on('resize',defineResolutionVariables);NU.log('loaded resolution variables');},initCrossBrowserFixes:function(){var isIEorEdge=(function(){return/Edge\//i.test(navigator.userAgent)||navigator.appName=='Microsoft Internet Explorer'||(navigator.appName=='Netscape'&&new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent)!=null);})();if(isIEorEdge){$('.top-logo img[src*="svg"]').attr('src',function(){return $(this).attr('src').replace('.svg','.png');});$('<div></div>').addClass('topmenu-background').insertBefore('.block.topbar');}},initLazyUnveil:function(){$('.lazy-unveil').unveil(300);jQuery('.block').on('block-reloaded blockRefreshed block-ajaxappended',function(){$(this).find('.lazy-unveil').unveil(300);});NU.log('loaded lazy unveil');},initRoyalslider:function(element,options){var element=element||'.block.slideshow .royalSlider';jQuery(element).each(function(){var imageSlider=jQuery(this),config;if(typeof options==="object"){config=options;}else{config=NU.Config.RoyalSlider.nuDefault;}
if(imageSlider.attr('data-style')){var sliderStyle=imageSlider.attr('data-style');if(NU.Config.RoyalSlider[sliderStyle]){config=NU.Config.RoyalSlider[sliderStyle];}}
var prefix=imageSlider.attr('data-slug');if(prefix){if(prefix.length>40){prefix='slide';}}
var imageSliderJQ=imageSlider.royalSlider(config);var sliderInstance=imageSliderJQ.data('royalSlider');if(sliderInstance){var sliderOverflow=imageSliderJQ.find('.rsOverflow');$('<div class="rsActionBar left"><div class="rsActionBarBtn rsSlideCount"></div></div>'+'<div class="rsActionBar right">'+'<div class="rsActionBarBtn rsImageOnlyBtn"><i class="fa fa-eye rsActionbarIcn"></i></div>'+'</div>'+'<div class="rsActionBar center"><div class="rsSlideshowTitle"><span>'+imageSliderJQ.data('slideshowtitle')+'</span></div></div>').appendTo(sliderOverflow);var slideCountEl=$('.rsSlideCount',sliderOverflow);var blockContent=$(this).parents('.block-content:first');var imageOnlyBtn=blockContent.find('.rsImageOnlyBtn');var closeBtn=blockContent.find('.rsCloseShareOverlayBtn');var fullScreenBtn=blockContent.find('.rsFullscreenBtn');fullScreenBtn.on('click',function(e){blockContent.toggleClass('slideshowIsFullscreen');});$(document).keyup(function(e){e.preventDefault();blockContent.removeClass('slideshowIsFullscreen');});imageOnlyBtn.on('click',function(e){e.preventDefault();$('i',imageOnlyBtn).toggleClass('fa-eye').toggleClass('fa-eye-slash');imageSliderJQ.toggleClass('rsImageOnly');setTimeout(function(){sliderInstance.updateSliderSize(true);},10);});closeBtn.on('click',function(e){e.preventDefault();blockContent.removeClass('overlayActive');});function updCount(){slideCountEl.html((sliderInstance.currSlideId+1)+' / '+sliderInstance.numSlides);var slideshow_label='slideshow';if(imageSlider.attr('data-slug')){slideshow_label+='_'+imageSlider.attr('data-slug');}}
sliderInstance.ev.on('rsAfterSlideChange',updCount);updCount();sliderInstance.ev.on('rsOnCreateVideoElement',function(e,url){var match=url.match(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i);if(match[1]=='media.zie.nl'||match[1]=='embed.kijk.nl'){sliderInstance.videoObj=$('<iframe src="'+url+'" scrolling="no" allowfullscreen></iframe>');}
var videoBlock=imageSliderJQ.parents('.block.video .block-wrapper');if(videoBlock.hasClass('has-related')){if(!videoBlock.hasClass('video-playing')){videoBlock.addClass('video-playing');}}});sliderInstance.ev.on('rsAfterSlideChange',function(event){NU.log('afterSlideChange');if(sliderInstance._isVideoPlaying){sliderInstance.stopVideo();}
window.setTimeout(function(){sliderInstance.playVideo();},200);});}});NU.log('loaded Royalslider');},initTabs:function(findInElement,$){var core=this;$(findInElement).find('.tabs').not('.mixed-tabs').each(function(){var tabContainer=$(this),triggers=tabContainer.find('.tabtrigger ul li'),constrain=tabContainer.data('tab-constrain'),blockname=$.trim(tabContainer.closest('.block').attr('class'))||'anonymous';blockname=blockname.replace(/\s/,'_');var eventname=null;var eventdata=null;triggers.children('a').off('click.tabtrigger').on('click.tabtrigger',function(event){event.preventDefault();var index=$(this).data('tab');eventname=$(this).parents('.tabs').data('eventname');eventdata=$(this).data('eventdata');if(constrain){core.switchTabs(tabContainer,index);}else{core.switchTabs('.tabs',index);}
triggerEvent(eventname,eventdata);$('body').trigger('scroll');});if(tabContainer.find('.tab.active').length!=1||(triggers.length>0&&triggers.filter('.active').length!=1)){var index=triggers.eq(0).children('a').data('tab');core.switchTabs(tabContainer,index);}});function triggerEvent(eventname,eventdata)
{if(eventname&&eventdata){$(document).trigger(eventname,eventdata);}}
NU.log('loaded the tabs');},switchTabs:function(element,index){var unconstrained=(element=='.tabs');$(element).each(function(){var tabContainer=$(this),triggers=tabContainer.find('.tabtrigger ul li'),tabs=tabContainer.find('.tab');if(!tabContainer.data('forced-template')&&!(unconstrained&&tabContainer.data('tab-constrain'))){tabs.filter('.active').removeClass('active');var activeTab=tabs.filter('.tab-'+index).addClass('active');NU.log(activeTab);triggers.filter('.active').removeClass('active');triggers.filter(function(){return $(this).children('a').data("tab")==index;}).addClass('active');}});},initTabsOnRefresh:function(){var core=this;jQuery('.block').on('block-reloaded blockRefreshed',function(){core.initTabs(this,jQuery);});NU.log('loaded tabs on refresh');},initMixedTabs:function(){jQuery('.tabs.mixed-tabs .tabtrigger a').click(function(e){e.preventDefault();var tab=jQuery(this);var parent=tab.parentsUntil('.mixed-tabs').parent();if(parent.data('forced-template')){return;}
var scope=parent;if(!parent.data('tab-constrain')){scope=jQuery('.mixed-tabs').not('[data-tab-constrain]').not('[data-forced-template]');}
var targetTab=tab.data('tab');var targetCls=tab.data('tab-class');var otherCls=[];parent.find('.tabtrigger a[data-tab-class]').not(tab).each(function(){otherCls.push(jQuery(this).data('tab-class'));});var newTabs=scope.find('.tabtrigger a[data-tab="'+targetTab+'"]');if(targetCls){newTabs=scope.find('.tabtrigger a[data-tab="'+targetTab+'"][data-tab-class="'+targetCls+'"]');}
var otherTabs=scope.find('.tabtrigger a').not(newTabs);newTabs.parent().addClass('active');otherTabs.parent().removeClass('active');scope.find('.tab.tab-'+targetTab).each(function(){var parent=jQuery(this).parent();if(parent.data('forced-template')){return;}
parent.find('.tab').not(jQuery(this)).removeClass('active');jQuery(this).addClass('active');if(targetCls){for(var i in otherCls){jQuery(this).removeClass(otherCls[i]);}
jQuery(this).addClass(targetCls);}});});NU.log('loaded mixed tabs');},initCollapsibles:function(){jQuery('body').on('click','.collapsible .block-title',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.block').parent();var currentBlockContent=currentBlock.find('.block-wrapper');$(currentBlockContent).toggleClass('collapsed');});jQuery('body').on('click','.collapsible .collapse-trigger',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.collapsible').parent();$(currentBlock).toggleClass('collapsed');});jQuery('body').on('click','.card.collapsible .card-content',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.card').parent();var currentBlockContent=currentBlock.find('.card-wrapper');$(currentBlockContent).toggleClass('collapsed');});NU.log('loaded collapsibles');},initSearch:function(){jQuery('.search-box-molecule').each(function(){var elm=jQuery(this);elm.find('.search-button').click(function(){elm.toggleClass('closed');});elm.find('button[type="submit"]').click(function(event){if(elm.find('.search-input input').val()==''){event.preventDefault();elm.addClass('active');elm.find('.search-input input')[0].focus();}});elm.find('.search-input input').focus(function(){elm.addClass('active');elm.addClass('expanded');}).blur(function(){elm.removeClass('active');if(jQuery(this).val()==''){elm.removeClass('expanded');}});});}};$('document').ready(function(){NU.CoreUi.init();});window.consent_ready(function(){NU.CoreUi.init_after_consent();});;NU.BlockManager={registered:{},init:function(){$.each(this.registered,function(namespace,callback){jQuery('.block.'+namespace).each(function(i,block){NU.log('Block initialize',namespace,$(block).attr('id'));try{new callback($(block));}catch(e){NU.error(namespace,$(block).attr('id'),e.stack);}});});},register:function(namespace,callback){this.registered[namespace]=callback;}};NU.BlockStore={};NU.Block=Class.extend({container:null,_currentAjaxRequests:[],defaultConfig:{cssClasses:{hide:'dispnone'},wrapper:{selector:'.block-wrapper'}},config:{},init:function(container){if(!container){throw'Block initialization needs a html container attached';}
this.container=container;this.setData('block',this);this.initConfig();this.initialize();},initialize:function(){},initConfig:function(){this.config=jQuery.extend(true,{},this.defaultConfig,this.config)},log:function(){var args=Array.prototype.slice.call(arguments);args.unshift(this.getData('id'));args.unshift(this.getData('type'));NU.log.apply(this,args)},error:function(){var args=Array.prototype.slice.call(arguments);args.unshift(this.getData('id'));args.unshift(this.getData('type'));NU.error.apply(this,args);},getData:function(key){if(!key){return this.error('getData: no key given')}else{var data=this.container.data(key);if(data){return JSON.parse(JSON.stringify(data));}}},setData:function(key,value){return this.container.data(key,value);},getId:function(){return this.getData('id');},getContext:function(key){if(key){var context=this.getData('context')[key];}else{var context=this.getData('context');}
context=this.filterContext(context);return context;},filterContext:function(context){return context;},setContext:function(data,key){if(key){var context=this.getContext();context[key]=data;return this.setData('context',context);}else{return this.setData('context',data);}},reloadBlock:function(){var self=this;var url=this.container.data('url');if(!url){throw'Called reload, but no url found within the container element';}
self.log('Reloading block');jQuery.getJSON(url,function(response){if(response.html){self.container.html(response.html);}
if(response.data){self.container.data(response.data)}
self.trigger('block-reloaded');self.log(['Block reloaded',self.container]);self.initialize();self.log('initialize called');});},trigger:function(){var args=Array.prototype.slice.call(arguments);this.container.trigger.apply(this.container,args);},bind:function(eventtype,callback){var self=this;this.container.bind(eventtype,function(){var args=Array.prototype.slice.call(arguments);callback.apply(self,args)});},getTemplate:function(selector){if(typeof selector==="string"){selector=this.container.find(selector);}
var source=selector.html();return swig.compile(source);},renderTemplate:function(selector,context){try{var tpl=this.getTemplate(selector);var html=tpl(context);return html;}catch(err){this.error(err.message);}},sortDictByKey:function(dict,key){var newList=[];for(var i in dict){if(dict.hasOwnProperty(i)){newList.push(dict[i]);}}
newList.sort(function(a,b){if(a[key]>b[key]){return 1}
if(a[key]<b[key]){return-1}
return 0;});return newList;},sortDictByKeyReversed:function(dict,key){var newList=this.sortDictByKey(dict,key);newList.reverse();return newList},ajax:function(options){var self=this;var callbackStorage=NU.namespace('NU.BlockStore.ajax.callbacks');if(!callbackStorage[options.url]){callbackStorage[options.url]={}}
var current=callbackStorage[options.url];jQuery.extend(true,current,jQuery.extend({running:false,callbacks:[]},current));current.callbacks.push(options);if(!current.running){current.running=true;jQuery.ajax({url:options.url,dataType:options.dataType||'jsonp',complete:function(){current.running=false;current.callbacks=[];},success:function(json){jQuery.each(current.callbacks,function(url,options){options.success(JSON.parse(JSON.stringify(json)));});},error:function(e,status,error){jQuery.each(callbackStorage,function(options){options.error(e,status,error);});}});}},hideBlock:function(){this.container.find(this.config.wrapper.selector).addClass(this.config.cssClasses.hide);},showBlock:function(){this.container.find(this.config.wrapper.selector).removeClass(this.config.cssClasses.hide);},filterDataByKey:function(data,key,filter){var filtered=[];jQuery.each(data,function(i,row){if(filter.indexOf(row[key])>=0){filtered[filtered.length]=row;}});return filtered;}});jQuery(function(){NU.BlockManager.init();});